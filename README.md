# PostMoon - AI Powered Rhymix Uploader

**PostMoon**은 구글 Gemini AI를 활용하여 게시글을 분석, 정리하고 라이믹스(Rhymix) 기반 웹사이트에 안전하게 업로드하는 통합 솔루션입니다.
본 패키지는 **사용자 PC용 프로그램(Client)**과 **서버 연동용 파일(Server)**로 구성되어 있습니다.

---

## 📦 패키지 구성 (Package Contents)

이 폴더에는 다음 파일들이 포함되어 있습니다:

### 🖥️ 클라이언트 (Client - PC용)
1.  **`PostMoon_v1.5.0.exe`**: 설치 없이 바로 실행 가능한 윈도우용 프로그램. (추천)
2.  **`PostMoon.py`**: 개발자용 파이썬 소스 코드. (직접 수정/실행 시 사용)
3.  **`requirements.txt`**: 파이썬 실행에 필요한 라이브러리 목록.

### 🌐 서버 (Server - 웹사이트용)
1.  **`secure_api.php`**: **(필수)** 라이믹스와 통신하는 브릿지 파일.
2.  **`admin_api_keys.php`**: **(관리자용)** API 키를 발급하고 관리하는 웹 도구.
3.  **`api_config.sample.php`**: (선택) DB 대신 파일로 키를 관리할 때 사용하는 예제 파일.
4.  **`schema.sql`**: (참고용) DB 테이블 수동 생성 쿼리.

---

## 🚀 설치 및 설정 가이드 (Setup Guide)

### 1단계: 서버 설정 (폴더 통째 업로드)
라이믹스(Rhymix)가 설치된 웹 서버에 **PostMoon 폴더 전체**를 업로드합니다.

1.  **폴더 업로드**:
    *   FTP/SFTP로 Rhymix 설치 경로 최상위( `index.php` 있는 위치 )에 **PostMoon 폴더**를 그대로 업로드합니다.
    *   업로드가 끝나면 다음 경로로 접근할 수 있습니다:
        - 관리자 키 발급 페이지: `https://내도메인/PostMoon/admin_api_keys.php`
        - API 엔드포인트: `https://내도메인/PostMoon/secure_api.php`
    *   *보안 권장사항: 필요 시 `secure_api.php` 파일명을 난수화해 사용하거나 폴더명을 변경해 URL 추측을 어렵게 만드는 것도 좋습니다.*

2.  **API 키 발급**:
    *   웹 브라우저에서 `https://내도메인/PostMoon/admin_api_keys.php` 주소로 접속합니다.
    *   **관리자 계정**으로 로그인되어 있어야 합니다. (로그인이 안 되어 있으면 접근 거부됨)
    *   최초 접속 시 `rx_api_keys` 데이터베이스 테이블이 **자동으로 생성**됩니다.
    *   **[키 생성]** 섹션에서 API를 사용할 회원 아이디를 입력하고 생성 버튼을 누릅니다.
    *   생성된 **API Key**(`rx_live_...`)를 복사해 둡니다.

    > **참고 (DB 사용 불가 시)**: DB 테이블 생성이 어렵다면 `api_config.sample.php` 파일명을 `api_config.php`로 변경하고, 파일 내부에 직접 키와 아이디를 적어서 `secure_api.php`와 같은 폴더에 업로드하세요.

### 2단계: 클라이언트 설정 (Client Setup)
PC에서 프로그램을 실행하고 서버 정보를 등록합니다.

1.  **프로그램 실행**:
    *   `PostMoon_v1.5.0.exe`를 실행합니다.

2.  **프로필 추가**:
    *   우측 상단 **[설정 열기]** 버튼 클릭 -> **[➕ 추가]** 버튼 클릭.
    *   프로필 이름 입력 (예: "내 홈페이지").

3.  **정보 입력**:
    *   **Rhymix URL**: `secure_api.php` 파일의 전체 주소.
        *   기본값: `https://mysite.com/PostMoon/secure_api.php`
        *   **주의**: 폴더명을 `mOOnster` 등으로 변경했다면 URL도 반드시 변경해야 합니다.
    *   **Rhymix API Key**: 1단계에서 발급받은 키 (`rx_live_...`)
    *   **게시판 ID (mid)**: 글을 올릴 게시판의 모듈 ID (예: `notice`, `freeboard`)
    *   **Gemini API Key**: Google AI Studio에서 발급받은 키.

4.  **저장**:
    *   **[💾 현재 프로필 저장]** 버튼을 눌러 설정을 저장합니다.

---

## 📝 사용 방법 (Usage)

1.  **원문 작성**: 왼쪽 입력창에 공지사항 초안이나 보도자료 내용을 입력합니다.
2.  **스타일 선택**: "HTML 보도자료 스타일" 등을 선택합니다.
3.  **AI 분석**: **[✨ AI 분석 및 정리]** 버튼을 클릭합니다.
4.  **검토 및 수정**: 오른쪽 결과창에 변환된 내용이 나옵니다.
    *   내용이 마음에 들지 않으면 하단 입력창에 "더 정중하게 수정해줘"라고 입력하고 **[🔄 Refine]** 버튼을 누릅니다.
5.  **업로드**:
    *   제목을 확인하고 필요시 첨부파일을 추가합니다.
    *   **[📤 게시글 Rhymix로 전송]** 버튼을 누르면 홈페이지에 글이 등록됩니다.

---

## ❓ 자주 묻는 질문 (FAQ)

**Q. 발급받은 API 키를 홈페이지 회원 정보(내 정보) 수정에서 입력해야 하나요?**
A. **아니요, 전혀 필요 없습니다.**
API 키는 `secure_api.php`가 내부적으로 관리하는 별도의 데이터베이스(`rx_api_keys`)에 저장됩니다. 홈페이지 회원 정보나 관리자 페이지의 회원 설정에는 아무것도 입력할 필요가 없습니다. 오직 **PostMoon 프로그램 설정**에만 입력하면 됩니다.

**Q. `admin_api_keys.php`는 계속 놔둬도 되나요?**
A. 관리자만 접속할 수 있도록 되어 있지만, 보안을 위해 키 발급이 끝나면 **서버에서 삭제**하거나 **파일 이름을 변경**해 두는 것을 권장합니다.

**Q. 클라이언트 실행 파일을 새 버전으로 다시 만들어야 하나요?**
A. **아니요.** 서버 측 폴더/파일 경로만 변경되었기 때문에, 클라이언트 프로그램에서는 **API URL을 새 경로(예: `/PostMoon/secure_api.php`)로 변경**해 사용하면 됩니다. 별도의 실행 파일 재빌드는 필요하지 않습니다.

## ⚠️ 보안 주의사항

*   `secure_api.php` 파일은 외부에서 글을 등록할 수 있는 통로이므로 API Key 관리에 유의하세요.
